{% extends "base.html" %}

{% block title %}Watchlist - Asort Design{% endblock %}

{% block content %}
  <div class="card">
    <h2>Watchlist</h2>
    <p class="muted">
      A quick triage queue for items that need a second look or a rerun.
    </p>
  </div>

  {% if items %}
    {% for item in items %}
      <div class="card">
        <div class="muted">
          <span
            class="{% if item.audience == 'Cross-Functional' %}tooltip{% endif %}"
            {% if item.audience == 'Cross-Functional' %}
              data-tip="Mixed stakeholders (see request for details)"
            {% endif %}
          >
            {{ item.audience }}
          </span>
          •
          <span class="status-chip status-{{ item.status }}">{{ item.status }}</span>
          • {{ item.created_at }}
        </div>
        <h3>Attention Needed</h3>
        <ul>
          {% for issue in item.issues %}
            <li>{{ issue }}</li>
          {% endfor %}
        </ul>
        <div class="actions">
          <a class="button" href="/web/jobs/{{ item.job_id }}">Review Request</a>
        </div>
      </div>
    {% endfor %}
    <div class="card">
      <div class="pagination">
        {% if has_prev %}
          <a class="button" href="/web/watchlist?page={{ page - 1 }}">Previous</a>
        {% endif %}
        <span class="muted">Page {{ page }}</span>
        {% if has_next %}
          <a class="button" href="/web/watchlist?page={{ page + 1 }}">Next</a>
        {% endif %}
      </div>
    </div>
  {% else %}
    <div class="card">
      <p class="muted">All clear. No items need attention right now.</p>
    </div>
  {% endif %}
{% endblock %}
